<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
    <link rel="stylesheet" href="./css/gallery.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
        <script src="./lib/jquery.min.js"></script>

<style>
.loader {
      border: 3px solid #f3f3f3;
      border-radius: 50%;
      border-top: 3px solid #3498db;
      width: 60px;
      height: 60px;
      -webkit-animation: spin 1s linear infinite;
      animation: spin 1s linear infinite;
    }

@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


    @-webkit-keyframes spin {
      0% {
        -webkit-transform: rotate(0deg);
      }

      100% {
        -webkit-transform: rotate(360deg);
      }
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
    }

    /* The Modal (background) */
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      padding-top: 100px;
      /* Location of the box */
      left: 0;
      top: 0;
      width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: rgb(0, 0, 0);
      /* Fallback color */
      background-color: rgba(0, 0, 0, 0.4);
      /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
      background-color: #fefefe;
      margin: auto;
      margin-top: 10%;
      padding: 20px;
      border: 1px solid #888;
      width: 35%;
      height: 35%;
    }

</style>

</head>
<body>
  <div class="wrapper">
    <!-- filter Items -->
    <nav >
      <div class="items" >
        <span class="item active" data-name="all" style="text-align:center;width:70px;height:40px;" id="allSelected">All</span>
        <span class="item" data-name="culturalFest" style="text-align:center;width:210px;height:40px;" id="culturtalSelected">Cultural Fest</span>
        <span class="item" data-name="techFest" style="text-align:center;width:170px;height:40px;" id="techFestSelected">Tech Fest</span>
        <span class="item" data-name="college" style="text-align:center;width:100px;height:40px;" id="collegeSelected">College </span>
        <span class="item" data-name="hostel" style="text-align:center;width:90px;height:40px;" id="hostelSelected">Hostel</span>
       <span class="item" data-name="video" style="text-align:center;width:90px;height:40px;" id="videoSelected">Video</span>
        <span class="item" data-name="other" style="text-align:center;width:90px;height:40px;" id="otherSelected">Others</span>
        
      </div>
    </nav>
    <!-- filter Images -->
    <div class="gallery" id="imageGallery">
     <!--  <div class="image" data-name="culfest"><span><img src="images/gallery/g-1.jpg" alt=""></span></div>
      <div class="image" data-name="headphone"><span><img src="images/gallery/g-2.jpg" alt=""></span></div>
      <div class="image" data-name="hostel"><span><img src="./ece/hostel1.jpg" alt=""></span></div>
      <div class="image" data-name="techfest"><span><img src="images/header/study.jpg" alt=""></span></div>
      <div class="image" data-name="Others"><span><video src="./images/video/video_2021-12-21_02-14-51.mp4" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="images/BACKEND-1.jpeg" alt=""></span></div>
      <div class="image" data-name="culfest"><span><img src="images/gallery/g-5.jpg" alt=""></span></div>
      <div class="image" data-name="techfest"><span><img src="ece/clg.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="images/gallery/g-4.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college1.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college2.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college3.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college4.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college5.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college6.jpg" alt=""></span></div>
      <div class="image" data-name="clg"><span><img src="./ece/college7.jpg" alt=""></span></div> -->
    </div>
  </div>
  <!-- fullscreen img preview box -->
  <div class="preview-box">
    <div class="details">
      <span class="title">Image Category: <p></p></span>
      <span class="icon fas fa-times"></span>
    </div>
    <div class="image-box"><img src="" alt=""></div>
  </div>
  <div class="shadow"></div>
  
        <!-- Loader Modal Start -->
   <div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <div class="loader1" style="display:none;">
        <div class="loader" style="margin: auto;margin-left:40%;margin-top:7%;">
        </div>

        <h4
          style="font-size:20px;margin: auto;margin-left:30%;margin-top:0%;color: rgb(30, 169, 224);  letter-spacing: 5px; padding: 10px;">
          Please wait....</h4>
      </div>
    </div>

  </div>
 <!-- Loader Modal end -->
 
  
  
 
  
  
  <script>
  
  $(document).ready(function(){
	  $('#myModal').show();
		//Calling Loader
		$(".loader1").show();
		fetchCanvasFiles("all");
  });
 
  
  $('#allSelected').click(function (event){
	  fetchCanvasFiles("all");
		
	  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
	  	 $('#allSelected').addClass("item active");

	  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
	  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
	  	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
	  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
	  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
	  	 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
	  	 $('#techFestSelected').addClass("item");
	  	 $('#culturtalSelected').addClass("item");
	     $('#videoSelected').addClass("item");
	 	 $('#collegeSelected').addClass("item");
	 	 $('#otherSelected').addClass("item");
	  	 $('#hostelSelected').addClass("item");

	  });
  
  
	  $('#techFestSelected').click(function (event){
		  	event.preventDefault();

		    $('#myModal').show();
			//Calling Loader
			$(".loader1").show();
			fetchCanvasFiles("techFest");
		  	
		  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
		  	 $('#techFestSelected').addClass("item active");

		  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
		  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
		  	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
		  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
		  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
		  	 $('#allSelected').addClass("item");
		  	 $('#culturtalSelected').addClass("item");
		     $('#videoSelected').addClass("item");
		 	 $('#collegeSelected').addClass("item");
		 	 $('#otherSelected').addClass("item");
		  	 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
		  	 $('#hostelSelected').addClass("item");

		  });
	  
  
	  $('#culturtalSelected').click(function (event){
		  	event.preventDefault();

		  	 $('#myModal').show();
				//Calling Loader
				$(".loader1").show();
				fetchCanvasFiles("culturalFest");
		  	
		  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
		  	 $('#culturtalSelected').addClass("item active");

		  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
		  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
		  	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
		  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
		  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
		  	 $('#allSelected').addClass("item");
		  	 $('#culturtalSelected').addClass("item");
		     $('#videoSelected').addClass("item");
		 	 $('#collegeSelected').addClass("item");
		 	 $('#otherSelected').addClass("item");
			 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
		  	 $('#hostelSelected').addClass("item");
		  });
	  

	  $('#videoSelected').click(function (event){
		  	event.preventDefault();


		    $('#myModal').show();
			//Calling Loader
			$(".loader1").show();
			fetchCanvasFiles("video");
		  	
		  	
		  	
		  	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
		  	 $('#videoSelected').addClass("item active");

		  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
		  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
		  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
		  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
		  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
		  	 $('#allSelected').addClass("item");
		  	 $('#culturtalSelected').addClass("item");
		     $('#culturtalSelected').addClass("item");
		 	 $('#collegeSelected').addClass("item");
		 	 $('#otherSelected').addClass("item");
			 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
		  	 $('#hostelSelected').addClass("item");
		  });
	  
	  $('#collegeSelected').click(function (event){
		  	event.preventDefault();

		    $('#myModal').show();
			//Calling Loader
			$(".loader1").show();
			fetchCanvasFiles("college");
		  	
		  	
		  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
		  	 $('#collegeSelected').addClass("item active");

		  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
		  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
		  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
		  	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
		  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
		  	 $('#allSelected').addClass("item");
		  	 $('#culturtalSelected').addClass("item");
		     $('#culturtalSelected').addClass("item");
		 	 $('#videoSelected').addClass("item");
		 	 $('#otherSelected').addClass("item");
			 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
		  	 $('#hostelSelected').addClass("item");
		  });
  
  
	  $('#hostelSelected').click(function (event){
		  	event.preventDefault();

		    $('#myModal').show();
			//Calling Loader
			$(".loader1").show();
			fetchCanvasFiles("hostel");
		  	
		  	
		  	 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
		  	 $('#hostelSelected').addClass("item active");

		  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
		  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
		  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
		  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
		  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
		  	 $('#allSelected').addClass("item");
		  	 $('#culturtalSelected').addClass("item");
		     $('#culturtalSelected').addClass("item");
		 	 $('#collegeSelected').addClass("item");
		 	 $('#otherSelected').addClass("item");
		 	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
		  	 $('#videoSelected').addClass("item");
		  });
	  
	  
	  
	  $('#otherSelected').click(function (event){
		  	event.preventDefault();

		    $('#myModal').show();
			//Calling Loader
			$(".loader1").show();
			fetchCanvasFiles("other");
		  	
		  	
		  	 $('#otherSelected').removeClass( $('#otherSelected').attr('class'));
		  	 $('#otherSelected').addClass("item active");

		  	 $('#allSelected').removeClass( $('#allSelected').attr('class'));
		  	 $('#techFestSelected').removeClass( $('#techFestSelected').attr('class'));
		  	 $('#culturtalSelected').removeClass( $('#culturtalSelected').attr('class'));
		  	 $('#collegeSelected').removeClass( $('#collegeSelected').attr('class'));
		  	 $('#videoSelected').removeClass( $('#videoSelected').attr('class'));
		  	 $('#allSelected').addClass("item");
		  	 $('#culturtalSelected').addClass("item");
		     $('#culturtalSelected').addClass("item");
		 	 $('#collegeSelected').addClass("item");
		 	 $('#videoSelected').addClass("item");
			 $('#hostelSelected').removeClass( $('#hostelSelected').attr('class'));
		  	 $('#hostelSelected').addClass("item");
		  });
	  
	  
  
  function fetchCanvasFiles(query){
	  $('#imageGallery').empty() ; 
    	 $.ajax({
		      type: "GET",
		      url:"/College_Final_Year_Project/canvas?action=gallery&query="+query,
		      success: function (data, textStatus, jqXHR) {
		    	
		      var JsonData= jQuery.parseJSON(data);
		     
		          $(JsonData).each(function (index, item) {  
		        	  var imagecard;	
		        	  if(item.name=="video"){
		        		  imagecard  ='<div class="image" data-name="'+item.name+'"><span>'
		        		  +'<video  controls>'
			        		+'<source src="'+item.filePath+'" type="video/mp4">'
			        		+'</video></span></div>';
  
		        	  }else{
		        	   imagecard='<div class="image" data-name="'+item.name+'"><span><img src="'+item.filePath+'" alt=""></span></div>';
		        		  
		        	  }
		        	$('#imageGallery').append(imagecard) ; 
		        	  
		          });
		    		 
		          $(".loader1").hide();
  		        $('#myModal').hide();
		      },
		      error: function (jqXHR, textStatus, errorThrown) {
		    	  $(".loader1").hide();
  		        $('#myModal').hide();
		    	  alert("Someting went wrong while loading gallery.Please refersh the page");
		     
		      
		      }
		    });  
     	
     	
     }
     
  
  </script>
   
  

  
</body>
</html>